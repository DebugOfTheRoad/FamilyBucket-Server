webpackJsonp([9,21],{Bj1d:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l("Dd8w"),a=l.n(o),n=l("QEUx"),r=l("Ybjn"),i=l("W3Y5"),s={components:{iTable:n.a,Edit:r.default},data:function(){var e=this,t=this.$createElement;return{editModel:null,showEdit:!1,platformList:[],filters:{PlatformId:0},dataList:[],pageSize:20,customStyle:"",columns:[{prop:"Name",label:"名称",width:"200",type:"",format:function(e,t){var l="";return l=e.Icon&&e.Icon.indexOf("#")>-1?'<i class="axon-icon">'+e.Icon+"</i>":'<i class="'+e.Icon+'"></i>',e.ParentId?'<span style="margin-left: 26px;font-size: 13px">'+e.Name+"</span>":l+'<span style="font-size: 16px;font-weight:bold;padding-left: 10px">'+e.Name+"</span>"}},{prop:"LinkUrl",label:"路径",minWidth:"200",type:""},{prop:"State",label:"状态",width:"100",align:"center",type:"",render:function(e,l){return e.State?t("el-tag",["启用"]):t("el-tag",{attrs:{type:"danger"}},["禁用"])}},{prop:"SortId",label:"排序",width:"80",type:"",align:"center"}],operateColumn:{width:110,fixed:"right",list:[{type:"primary",name:"编辑",icon:"edit",method:function(t,l){e.editModel=a()({},l,{switchState:!!l.State,level:0===l.ParentId?0:1,parents:e.dataList.filter(function(e){return 0===e.ParentId&&e.Id!==l.Id})}),e.showEdit=!0},disabled:function(e,t){}}]}}},computed:{loading:function(){return this.$store.getters.btnLoading.str&&!this.$store.getters.btnLoading.id}},created:function(){this.BLL=new i.a(this),this.BLL.init(),this.BLL.search()},beforeDestroy:function(){},mounted:function(){},methods:{tableRowClassName:function(e){var t=e.row;e.index;return t.ParentId?"":"positive-row"}}},c={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"nav-contain"},[l("el-form",{attrs:{inline:!0,model:e.filters}},[l("el-form-item",[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.filters.PlatformId,callback:function(t){e.$set(e.filters,"PlatformId",t)},expression:"filters.PlatformId"}},[l("el-option",{key:"0",attrs:{value:0,label:"全部平台"}}),e._v(" "),e._l(e.platformList,function(e){return l("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})],2)],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.BLL.search()}}},[e._v("查询")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.BLL.add()}}},[e._v("新增")])],1)],1),e._v(" "),l("iTable",{ref:"iTable",attrs:{tableData:e.dataList,columns:e.columns,loading:e.loading,pageSize:e.pageSize,otherHeight:230,operateColumn:e.operateColumn,tableRowClassName:e.tableRowClassName}}),e._v(" "),l("edit",{attrs:{modelForm:e.editModel},on:{addSuccess:function(t){e.BLL.search()}},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}})],1)},staticRenderFns:[]};var d=l("VU/8")(s,c,!1,function(e){l("UfzF")},null,null);t.default=d.exports},UfzF:function(e,t){},W3Y5:function(e,t,l){"use strict";var o=l("Xxa5"),a=l.n(o),n=l("exGp"),r=l.n(n),i=l("Zx67"),s=l.n(i),c=l("Zrlr"),d=l.n(c),u=l("wxAW"),m=l.n(u),f=l("zwoO"),p=l.n(f),v=l("Pf15"),h=l.n(v),b=l("Dd8w"),I=l.n(b),g=l("hky6");function w(e){var t=[];e.forEach(function(e){0===e.ParentId&&t.push(I()({},e,{sub:[]}))}),t.sort(function(e,t){return e.SortId-t.SortId}),e=e.filter(function(e){return 0!==e.ParentId}),t.forEach(function(t){e.forEach(function(e){t.Id===e.ParentId&&(t.sub.push(e),t.sub.sort(function(e,t){return e.SortId-t.SortId}))})});var l=[];return t.forEach(function(e){l.push(e),e.sub.forEach(function(e){l.push(e)})}),l}var y=function(e){function t(){return d()(this,t),p()(this,(t.__proto__||s()(t)).apply(this,arguments))}return h()(t,e),m()(t,[{key:"init",value:function(){var e=r()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.QueryPlatforms({load:!1});case 2:(t=e.sent)&&(this.vm.platformList=t.Data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=r()(a.a.mark(function e(){var t,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.vm.filters,e.next=3,g.a.QueryAllMenus(t);case 3:(l=e.sent)&&(this.vm.dataList=w(l.Data));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(){this.vm.editModel={PlatformId:null,ParentId:0,LinkUrl:null,Icon:"el-icon-menu",SortId:1,switchState:!0,level:0,parents:this.vm.dataList.filter(function(e){return 0===e.ParentId})},this.vm.showEdit=!0}},{key:"editSubmit",value:function(){var e,t=this;this.vm.$refs.modelForm.validate((e=r()(a.a.mark(function e(l){var o,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=10;break}return delete(o=I()({},t.vm.modelForm,{State:t.vm.modelForm.switchState?1:0,Icon:0===t.vm.modelForm.level?t.vm.modelForm.Icon:null})).parents,n={loadID:"edit"},e.next=6,g.a.SetPlatformMenu(o,n);case 6:e.sent&&(t.vm.show=!1,t.vm.$emit("addSuccess"),t.vm.$notify({title:"成功",message:"操作成功",type:"success"})),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}}]),t}(l("ARvU").a);t.a=y},Ybjn:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l("Gu7T"),a=l.n(o),n=l("W3Y5"),r=l("gpV4"),i={props:{value:{type:Boolean,default:!1},modelForm:{type:Object}},data:function(){return{navIcons:[].concat(a()(r.b)),show:!1,btnName:"新建",rules:{PlatformId:[{required:!0,message:"请选择平台",trigger:"blur"}],Name:[{required:!0,message:"请输入名称",trigger:"blur"}],Icon:[{required:!0,message:"请输入图标",trigger:"blur"}],ParentId:[{required:!0,message:"请输入上级目录",trigger:"blur",type:"number"}]},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value5:[]}},created:function(){this.BLL=new n.a(this),this.value&&(this.show=!0),this.BLL.init()},mounted:function(){},computed:{loading:function(){return this.$store.getters.btnLoading.str&&"edit"===this.$store.getters.btnLoading.id}},methods:{handleReset:function(){this.$refs.modelForm.resetFields()},handleSubmit:function(e){this.BLL.editSubmit(e)},levelChange:function(e){1===e&&0===this.modelForm.ParentId&&(this.modelForm.ParentId=null)}},watch:{show:function(e){var t=this;this.$emit("input",e),e?this.$nextTick(function(){t.modelForm.Id?t.btnName="编辑":t.btnName="新建"}):this.$refs.modelForm.clearValidate()},value:function(e){this.show=e}}},s={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{title:e.btnName,visible:e.show,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[e.modelForm?l("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"modelForm",staticStyle:{"padding-right":"24px"},attrs:{model:e.modelForm,rules:e.rules,"label-width":"100px"}},[l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"名称",prop:"Name"}},[l("el-input",{model:{value:e.modelForm.Name,callback:function(t){e.$set(e.modelForm,"Name",t)},expression:"modelForm.Name"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"路径",prop:"LinkUrl"}},[l("el-input",{model:{value:e.modelForm.LinkUrl,callback:function(t){e.$set(e.modelForm,"LinkUrl",t)},expression:"modelForm.LinkUrl"}})],1)],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"平台",prop:"PlatformId"}},[l("el-select",{attrs:{placeholder:"请选择平台"},model:{value:e.modelForm.PlatformId,callback:function(t){e.$set(e.modelForm,"PlatformId",t)},expression:"modelForm.PlatformId"}},e._l(e.platformList,function(e){return l("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}))],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"级别",prop:"level"}},[l("el-select",{attrs:{placeholder:"请选择级别"},on:{change:e.levelChange},model:{value:e.modelForm.level,callback:function(t){e.$set(e.modelForm,"level",t)},expression:"modelForm.level"}},[l("el-option",{attrs:{label:"一级目录",value:0}}),e._v(" "),l("el-option",{attrs:{label:"二级目录",value:1}})],1)],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[1===e.modelForm.level?l("el-form-item",{attrs:{label:"上级",prop:"ParentId"}},[l("el-select",{attrs:{placeholder:"请选择上级目录"},model:{value:e.modelForm.ParentId,callback:function(t){e.$set(e.modelForm,"ParentId",t)},expression:"modelForm.ParentId"}},e._l(e.modelForm.parents,function(e){return l("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}))],1):e._e()],1)],1),e._v(" "),0===e.modelForm.level?l("el-form-item",{attrs:{label:"图标",prop:"Icon"}},[l("el-select",{attrs:{placeholder:"",filterable:""},model:{value:e.modelForm.Icon,callback:function(t){e.$set(e.modelForm,"Icon",t)},expression:"modelForm.Icon"}},e._l(this.navIcons,function(t,o){return l("el-option",{key:t.key+o,attrs:{value:t.value,label:t.key}},[l("span",{staticStyle:{float:"left"}},[e._v(e._s(t.key))]),e._v(" "),t.value&&t.value.indexOf("#")>-1?l("i",{staticClass:"axon-icon",staticStyle:{float:"right"},domProps:{innerHTML:e._s(t.value)}}):l("i",{class:t.value,staticStyle:{float:"right"}})])})),e._v(" "),e.modelForm.Icon&&e.modelForm.Icon.indexOf("#")>-1?l("i",{staticClass:"axon-icon icon-size",staticStyle:{"padding-left":"10px"},domProps:{innerHTML:e._s(e.modelForm.Icon)}}):l("i",{class:e.modelForm.Icon,staticStyle:{"padding-left":"10px"}})],1):e._e(),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"排序",prop:"SortId"}},[l("el-input-number",{attrs:{min:1},model:{value:e.modelForm.SortId,callback:function(t){e.$set(e.modelForm,"SortId",t)},expression:"modelForm.SortId"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"状态",prop:"switchState"}},[l("el-switch",{attrs:{"on-text":"启用","off-text":"禁用"},model:{value:e.modelForm.switchState,callback:function(t){e.$set(e.modelForm,"switchState",t)},expression:"modelForm.switchState"}})],1)],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"关联接口",prop:"ApiList"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}},e._l(e.options,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.btnName))]),e._v(" "),l("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1):e._e()],1)},staticRenderFns:[]};var c=l("VU/8")(i,s,!1,function(e){l("qYO7")},null,null);t.default=c.exports},qYO7:function(e,t){}});