webpackJsonp([3],{"3ZGJ":function(t,e){},"9rJI":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Yc4v"),l=n("dXij"),o=n.n(l),r=n("c/Tr"),i=n.n(r),s=n("7+uW");function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=[];return i()(t).forEach(function(t){void 0===t._expanded&&s.default.set(t,"_expanded",e);var o=1;if(void 0!==a&&null!==a&&(o=a+1),s.default.set(t,"_level",o),n&&s.default.set(t,"parent",n),l.push(t),t.Children&&t.Children.length>0){var r=d(t.Children,e,t,o);l=l.concat(r)}}),l}var u={name:"treeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},firstColumn:{type:Array,default:function(){return[]}}},computed:{formatData:function(){var t=void 0;t=Array.isArray(this.data)?this.data:[this.data];var e=this.evalFunc||d,n=this.evalArgs?o()([t,this.expandAll],this.evalArgs):[t,this.expandAll];return e.apply(null,n)}},methods:{showRow:function(t){var e=!t.row.parent||t.row.parent._expanded&&t.row.parent._show;return t.row._show=e,e?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(t){var e=this.formatData[t];e._expanded=!e._expanded},iconShow:function(t,e){return 0===t&&e.Children&&e.Children.length>0}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",t._b({attrs:{data:t.formatData,"row-style":t.showRow}},"el-table",t.$attrs,!1),[0===t.columns.length?n("el-table-column",{attrs:{label:t.firstColumn.length>0?t.firstColumn[0]:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row._level,function(t){return n("span",{key:t,staticClass:"ms-tree-space"})}),t._v(" "),t.iconShow(0,e.row)?n("span",{staticClass:"tree-ctrl",on:{click:function(n){t.toggleExpanded(e.$index)}}},[e.row._expanded?n("i",{staticClass:"el-icon-minus"}):n("i",{staticClass:"el-icon-plus"})]):t._e(),t._v(" "),n("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.firstColumn.length>1?e.row[t.firstColumn[1]]:e.$index))])]}}])}):t._l(t.columns,function(e,a){return n("el-table-column",{key:e.value,attrs:{label:e.text,width:e.width},scopedSlots:t._u([{key:"default",fn:function(l){return[t._l(l.row._level,function(e){return 0===a?n("span",{key:e,staticClass:"ms-tree-space"}):t._e()}),t._v(" "),t.iconShow(a,l.row)?n("span",{staticClass:"tree-ctrl",on:{click:function(e){t.toggleExpanded(l.$index)}}},[l.row._expanded?n("i",{staticClass:"el-icon-minus"}):n("i",{staticClass:"el-icon-plus"})]):t._e(),t._v("\n      "+t._s(l.row[e.value])+"\n    ")]}}])})}),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var p=n("VU/8")(u,c,!1,function(t){n("PjiF"),n("jCCu")},"data-v-5f9376e2",null).exports;function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=[];return i()(t).forEach(function(t){void 0===t._expanded&&s.default.set(t,"_expanded",e);var o=1;if(void 0!==a&&null!==a&&(o=a+1),s.default.set(t,"_level",o),t.OperationName+=" ("+t.Duration/1e3+"ms)",n&&s.default.set(t,"parent",n),l.push(t),t.Children&&t.Children.length>0){var r=f(t.Children,e,t,o);l=l.concat(r)}}),l}var h=n("eORF"),m={props:{value:{type:Boolean,default:!1},modelForm:{type:Object}},components:{treeTable:p,Edit:h.default},data:function(){return{editModel:null,showEdit:!1,data:[],show:!1,func:f,firstObj:["Span","OperationName"],expandAll:!1,args:[null,null,"Duration"]}},created:function(){this.BLL=new a.a(this)},computed:{loading:function(){return this.$store.getters.btnLoading.str&&"edit"===this.$store.getters.btnLoading.id}},mounted:function(){},methods:{goSpanDetail:function(t){console.log(t.SpanId),this.BLL.showSpanDetail(t.SpanId)}},watch:{show:function(t){var e=this;this.$emit("input",t),t&&this.$nextTick(function(){e.data=[]})},value:function(t){this.show=t,this.modelForm&&this.modelForm.Spans.lenght<=5&&(this.expandAll=!0)}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[t.modelForm?n("el-dialog",{staticStyle:{"padding-right":"24px"},attrs:{title:"链路查看",visible:t.show,model:t.modelForm,"close-on-click-modal":!1,width:"75%"},on:{"update:visible":function(e){t.show=e}}},[n("el-row",{staticStyle:{"line-height":"20px"}},[n("el-col",{attrs:{span:12}},[t._v("追踪编号: "+t._s(t.modelForm.TraceId))]),t._v(" "),n("el-col",{attrs:{span:12}},[t._v("起始时间: "+t._s(t.modelForm.StartTimestamp))])],1),t._v(" "),n("el-row",{staticStyle:{"line-height":"20px"}},[n("el-col",{attrs:{span:12}},[t._v("请求耗时: "+t._s(t.modelForm.Duration/1e3)+"ms")]),t._v(" "),n("el-col",{attrs:{span:12}},[t._v("结束时间: "+t._s(t.modelForm.FinishTimestamp))])],1),t._v(" "),n("tree-table",{staticStyle:{"margin-top":"15px","border-top":"1px solid #eee"},attrs:{data:t.modelForm.Spans,evalFunc:t.func,evalArgs:t.args,firstColumn:t.firstObj,expandAll:t.expandAll}},[n("el-table-column",{attrs:{width:"90",label:"Time(%)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s((100*e.row.Duration/t.modelForm.Duration).toFixed(0))+"%\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"TimeLine",width:"520"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{effect:"dark",content:e.row.Duration+"ms",placement:"left"}},[n("div",{staticClass:"processContainer"},[n("div",{staticClass:"process",style:{width:e.row.Duration/t.modelForm.Duration*500+"px",marginLeft:e.row.Offset/t.modelForm.Duration*500+"px"}},[n("span",{staticStyle:{display:"inline-block"}})])])])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){t.goSpanDetail(e.row)}}},[t._v("详细")])]}}])})],1)],1):t._e(),t._v(" "),n("edit",{attrs:{modelForm:t.editModel},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}})],1)},staticRenderFns:[]};var _=n("VU/8")(m,v,!1,function(t){n("3ZGJ")},null,null);e.default=_.exports},"E/TR":function(t,e){t.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}},PjiF:function(t,e){},dXij:function(t,e,n){t.exports={default:n("E/TR"),__esModule:!0}},jCCu:function(t,e){}});