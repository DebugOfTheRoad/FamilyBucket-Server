webpackJsonp([22],{cqNn:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("kHdR"),l={props:{value:{type:Boolean,default:!1},modelForm:{type:Object},projectList:{type:Array}},data:function(){return{data:[],show:!1,btnName:"新建",rules:{ProjectName:[{required:!0,message:"请选择项目",trigger:"change"}],Message:[{required:!0,message:"请输入资源描述",trigger:"blur"}],Url:[{required:!0,message:"请输入资源地址",trigger:"blur"}],Method:[{required:!0,message:"请选择资源方法",trigger:"blur"}],Disabled:[{required:!0,message:"请选择资源状态",trigger:"blur"}],AllowScope:[{required:!0,message:"请选择访问范围",trigger:"change"}]}}},created:function(){this.BLL=new o.a(this),this.value&&(this.show=!0)},computed:{loading:function(){return this.$store.getters.btnLoading.str&&"edit"===this.$store.getters.btnLoading.id}},mounted:function(){},methods:{handleReset:function(){this.$refs.modelForm.resetFields()},handleSubmit:function(e){this.BLL.editSubmit(e)}},watch:{show:function(e){var t=this;this.$emit("input",e),e?this.$nextTick(function(){t.modelForm.Id?t.btnName="编辑":t.btnName="新建"}):this.$refs.modelForm.clearValidate()},value:function(e){this.show=e}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.btnName,visible:e.show,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(t){e.show=t}}},[e.modelForm?r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"modelForm",attrs:{model:e.modelForm,rules:e.rules,"label-width":"120px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"所属项目",prop:"ProjectName"}},[r("el-select",{attrs:{placeholder:"请选择项目"},model:{value:e.modelForm.ProjectName,callback:function(t){e.$set(e.modelForm,"ProjectName",t)},expression:"modelForm.ProjectName"}},e._l(e.projectList,function(e){return r("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"资源描述",prop:"Message"}},[r("el-input",{model:{value:e.modelForm.Message,callback:function(t){e.$set(e.modelForm,"Message",t)},expression:"modelForm.Message"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"资源Path",prop:"Url"}},[r("el-input",{model:{value:e.modelForm.Url,callback:function(t){e.$set(e.modelForm,"Url",t)},expression:"modelForm.Url"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"请求方法",prop:"Method"}},[r("el-radio-group",{model:{value:e.modelForm.Method,callback:function(t){e.$set(e.modelForm,"Method",t)},expression:"modelForm.Method"}},[r("el-radio-button",{attrs:{label:"POST"}}),e._v(" "),r("el-radio-button",{attrs:{label:"GET"}})],1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"控制器",prop:"Controller"}},[r("el-input",{model:{value:e.modelForm.Controller,callback:function(t){e.$set(e.modelForm,"Controller",t)},expression:"modelForm.Controller"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"控制器描述",prop:"ControllerName"}},[r("el-input",{model:{value:e.modelForm.ControllerName,callback:function(t){e.$set(e.modelForm,"ControllerName",t)},expression:"modelForm.ControllerName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"是否禁用",prop:"Disabled"}},[r("el-switch",{attrs:{"on-text":"启用","off-text":"禁用"},model:{value:e.modelForm.Disabled,callback:function(t){e.$set(e.modelForm,"Disabled",t)},expression:"modelForm.Disabled"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"访问范围",prop:"AllowScope"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.modelForm.AllowScope,callback:function(t){e.$set(e.modelForm,"AllowScope",t)},expression:"modelForm.AllowScope"}},[r("el-option",{key:0,attrs:{label:"匿名",value:0}}),e._v(" "),r("el-option",{key:1,attrs:{label:"登陆",value:1}}),e._v(" "),r("el-option",{key:2,attrs:{label:"角色",value:2}})],1)],1)],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.btnName))]),e._v(" "),r("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1):e._e()],1)},staticRenderFns:[]};var n=r("VU/8")(l,a,!1,function(e){r("nUdJ")},null,null);t.default=n.exports},kHdR:function(e,t,r){"use strict";var o=r("Dd8w"),l=r.n(o),a=r("Xxa5"),n=r.n(a),s=r("exGp"),i=r.n(s),m=r("Zx67"),c=r.n(m),u=r("Zrlr"),d=r.n(u),p=r("wxAW"),f=r.n(p),h=r("zwoO"),v=r.n(h),b=r("Pf15"),g=r.n(b),w=r("hky6"),F=function(e){function t(){return d()(this,t),v()(this,(t.__proto__||c()(t)).apply(this,arguments))}return g()(t,e),f()(t,[{key:"init",value:function(){var e=i()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.QueryProjectList();case 2:(t=e.sent)&&(this.vm.projectList=t.Data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetch(l()({PageIndex:this.vm.currentIndex,PageSize:this.vm.pagination.size},this.vm.filters));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleTableChange",value:function(e){this.vm.currentIndex=e.current,this.fetch(l()({PageIndex:e.current,PageSize:e.pageSize},this.vm.filters))}},{key:"fetch",value:function(){var e=i()(n.a.mark(function e(t){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.QueryApiList(t);case 2:(r=e.sent)&&(this.vm.dataList=r.Data,this.vm.pagination.total=r.Total);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){this.vm.editModel={ProjectName:null,Message:null,Url:null,Method:"GET",Disabled:!1,AllowScope:null},this.vm.showEdit=!0}},{key:"editSubmit",value:function(){var e,t=this;this.vm.$refs.modelForm.validate((e=i()(n.a.mark(function e(r){var o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return o={loadID:"edit"},e.next=4,w.a.SetApiInfo(t.vm.modelForm,o);case 4:e.sent&&(t.vm.show=!1,t.vm.$emit("addSuccess"),t.vm.$notify({title:"成功",message:"操作成功",type:"success"})),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}}]),t}(r("ARvU").a);t.a=F},nUdJ:function(e,t){}});