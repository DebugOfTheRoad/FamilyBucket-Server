webpackJsonp([12,23],{"9abu":function(e,t,n){"use strict";var o=n("Xxa5"),r=n.n(o),a=n("exGp"),i=n.n(a),s=n("Zx67"),l=n.n(s),u=n("Zrlr"),c=n.n(u),d=n("wxAW"),m=n.n(d),f=n("zwoO"),p=n.n(f),h=n("Pf15"),v=n.n(h),g=n("f485"),b=function(e){function t(){return c()(this,t),p()(this,(t.__proto__||l()(t)).apply(this,arguments))}return v()(t,e),m()(t,[{key:"search",value:function(){var e=i()(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.vm.filters,e.next=3,g.a.QueryServiceList(t);case 3:(n=e.sent)&&(this.vm.dataList=n.Data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(){this.vm.editModel={Name:null,Version:null,Tags:[],HostAndPort:{Host:null,Port:80},HealthCheckUri:null},this.vm.showEdit=!0}},{key:"editSubmit",value:function(){var e,t=this;this.vm.$refs.modelForm.validate((e=i()(r.a.mark(function e(n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return o={loadID:"edit"},e.next=4,g.a.SetServiceInfo(t.vm.modelForm,o);case 4:e.sent&&(t.vm.show=!1,t.vm.$emit("addSuccess"),t.vm.$notify({title:"成功",message:"操作成功",type:"success"})),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}},{key:"delete",value:function(e){var t=this,n="此操作将删除"+e+"服务节点, 是否继续?";this.vm.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i()(r.a.mark(function n(){var o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={loadID:"delete"},n.next=3,g.a.DeleteService({ServiceId:e},o);case 3:n.sent&&(t.vm.show=!1,t.vm.$emit("addSuccess"),t.vm.$notify({title:"成功",message:"操作成功",type:"success"}));case 5:case"end":return n.stop()}},n,t)})))}}]),t}(n("ARvU").a);t.a=b},"I+VV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("QEUx"),r=n("gJTB"),a=n("9abu"),i={components:{iTable:o.a,Edit:r.default},data:function(){var e=this;return{editModel:null,showEdit:!1,filters:{Name:null},dataList:[],columns:[{prop:"Id",label:"服务编号"},{prop:"Name",label:"服务名称"},{prop:"HostAndPort",label:"服务地址",render:function(e,t){return e.HostAndPort.Address+":"+e.HostAndPort.Port}},{prop:"Tags",label:"Tags",format:function(e){return e.Tags.join("<br />")}},{prop:"Version",label:"版本号"}],operateColumn:{width:120,fixed:"right",list:[{type:"danger",name:"删除服务",icon:"delete",method:function(t,n){var o="此操作将删除"+n.Id+"服务节点, 是否继续?";e.$confirm(o,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.BLL.delete(n.Id),e.$message({type:"success",message:"删除成功!"})})},disabled:function(e,t){}}]},pagination:{size:20}}},computed:{loading:function(){return this.$store.getters.btnLoading.str&&!this.$store.getters.btnLoading.id}},created:function(){this.BLL=new a.a(this),this.BLL.search()},beforeDestroy:function(){},mounted:function(){},methods:{}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-form",{attrs:{inline:!0},model:{value:e.filters,callback:function(t){e.filters=t},expression:"filters"}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"服务名称"},model:{value:e.filters.Name,callback:function(t){e.$set(e.filters,"Name",t)},expression:"filters.Name"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.BLL.search()}}},[e._v("查询")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.BLL.add()}}},[e._v("新增服务")])],1)],1),e._v(" "),n("iTable",{ref:"iTable",attrs:{tableData:e.dataList,columns:e.columns,loading:e.loading,pageSize:200,otherHeight:230,operateColumn:e.operateColumn}}),e._v(" "),n("edit",{attrs:{modelForm:e.editModel},on:{addSuccess:function(t){e.BLL.search()}},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}})],1)},staticRenderFns:[]},l=n("VU/8")(i,s,!1,null,null,null);t.default=l.exports},e8az:function(e,t){},gJTB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("9abu"),r={props:{value:{type:Boolean,default:!1},modelForm:{type:Object}},data:function(){return{data:[],show:!1,btnName:"新建",inputTagValue:"",rules:{Name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],Version:[{required:!0,message:"请输入版本号",trigger:"blur"}],HostAndPort:[{required:!0,message:"请输入服务地址",trigger:"blur"}],HealthCheckUri:[{required:!0,message:"请输入检查地址",trigger:"blur"}]}}},created:function(){this.BLL=new o.a(this),this.value&&(this.show=!0)},computed:{loading:function(){return this.$store.getters.btnLoading.str&&"edit"===this.$store.getters.btnLoading.id}},mounted:function(){},methods:{handleReset:function(){this.$refs.modelForm.resetFields()},handleSubmit:function(e){this.BLL.editSubmit(e)},tagClose:function(e,t){e.splice(e.indexOf(t),1)},handleInputTagConfirm:function(e){var t=this.inputTagValue;t&&e.push(t),this.inputTagValue=""}},watch:{show:function(e){var t=this;this.$emit("input",e),e?this.$nextTick(function(){t.data=[],t.modelForm.Id?t.btnName="编辑":t.btnName="新建"}):this.$refs.modelForm.clearValidate()},value:function(e){this.show=e}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.btnName,visible:e.show,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.show=t}}},[e.modelForm?n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"modelForm",attrs:{model:e.modelForm,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"服务名称",prop:"Name"}},[n("el-input",{model:{value:e.modelForm.Name,callback:function(t){e.$set(e.modelForm,"Name",t)},expression:"modelForm.Name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"版本",prop:"Version"}},[n("el-input",{model:{value:e.modelForm.Version,callback:function(t){e.$set(e.modelForm,"Version",t)},expression:"modelForm.Version"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"标签",prop:"Tags"}},[e._l(e.modelForm.Tags,function(t){return n("el-tag",{key:t,attrs:{type:"danger",closable:""},on:{close:function(n){e.tagClose(e.modelForm.Tags,t)}}},[e._v(e._s(t))])}),e._v(" "),n("el-input",{staticClass:"input-new-tag",attrs:{placeholder:"输入回车确认"},on:{blur:function(t){e.handleInputTagConfirm(e.modelForm.Tags)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleInputTagConfirm(e.modelForm.Tags)}},model:{value:e.inputTagValue,callback:function(t){e.inputTagValue=t},expression:"inputTagValue"}})],2),e._v(" "),n("el-form-item",{attrs:{label:"服务地址",prop:"HostAndPort"}},[n("el-col",{attrs:{span:10}},[n("el-input",{attrs:{placeholder:"地址",size:"medium"},model:{value:e.modelForm.HostAndPort.Host,callback:function(t){e.$set(e.modelForm.HostAndPort,"Host",t)},expression:"modelForm.HostAndPort.Host"}})],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-input",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"端口",size:"medium"},model:{value:e.modelForm.HostAndPort.Port,callback:function(t){e.$set(e.modelForm.HostAndPort,"Port",t)},expression:"modelForm.HostAndPort.Port"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"健康检查地址",prop:"HealthCheckUri"}},[n("el-input",{model:{value:e.modelForm.HealthCheckUri,callback:function(t){e.$set(e.modelForm,"HealthCheckUri",t)},expression:"modelForm.HealthCheckUri"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.btnName))]),e._v(" "),n("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1):e._e()],1)},staticRenderFns:[]};var i=n("VU/8")(r,a,!1,function(e){n("e8az")},null,null);t.default=i.exports}});